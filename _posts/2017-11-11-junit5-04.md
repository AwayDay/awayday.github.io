---
layout: post
title: "JUnit 5 (4)"
description: "κΈ°λ³Έμ μΈ ν…μ¤νΈ λ©”μ„λ“ μ‘μ„±κ³Ό μ–΄λ…Έν…μ΄μ… ν™μ©"
tags: [java, junit]
---

# λ“¤μ–΄κ°€κΈ° μ „μ—

* [< μ΄μ „ ν¬μ¤νΈ : JUnit 5 (3)](https://awayday.github.io/2017-10-29/junit5-03/)
* λ¨λ“  μ†μ¤μ½”λ“λ” JUnit 5 κ³µμ‹ μ μ € κ°€μ΄λ“μ κ²ƒμ„ μ‚¬μ©ν•μ€λ‹¤.
* 3μ¥μ€ λ‚΄μ©μ΄ κΈΈμ–΄μ„, λ‡ κ°μ ν¬μ¤νΈλ΅ λ‚λ μμ •μ΄κ³ , μ‘μ„± κ³Όμ •μ—μ„ λ‚΄μ©μ μμ„κ°€ λ³€κ²½λκ±°λ‚ λΉ μ§ μ μλ‹¤.
* λ²μ—­μ΄λΌκΈ° λ³΄λ‹¤λ” μ”μ•½μ •λ¦¬

[κ³µμ‹ μ μ € κ°€μ΄λ“](http://junit.org/junit5/docs/current/user-guide/) μ 3μ¥, ν…μ¤νΈ μ‘μ„±λ²• __μΌλ¶€__ λ¥Ό μ •λ¦¬ν•μ€λ‹¤.

# @Test μ™€ κΈ°λ³Έμ μΈ ν…μ¤νΈ

`@Test` λ” κ°€μ¥ κΈ°λ³Έμ μΈ μ–΄λ…Έν…μ΄μ…μΌλ΅μ„, ν…μ¤νΈ λ©”μ„λ“λ¥Ό μ§€μ •ν•  μ μλ‹¤. JUnit 4 μ‹μ κ³Ό λ‹¬λ¦¬, μ‚¬μ© κ°€λ¥ν• μµμ…λ„, μ¶”κ°€μ μΈ μΈμλ„ μ •μλμ–΄ μμ§€ μ•λ‹¤.

```java
import static org.junit.jupiter.api.Assertions.fail;

import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

class StandardTests {

    @BeforeAll
    static void initAll() {
    }

    @BeforeEach
    void init() {
    }

    @Test
    void succeedingTest() {
    }

    @Test
    void failingTest() {
        fail("a failing test");
    }

    @Test
    @Disabled("for demonstration purposes")
    void skippedTest() {
        // not executed
    }

    @AfterEach
    void tearDown() {
    }

    @AfterAll
    static void tearDownAll() {
    }

}
```

* μ°Έκ³  : ν…μ¤νΈ ν΄λμ¤μ™€ λ©”μ„λ“λ” λ°λ“μ‹ νΌλΈ”λ¦­μΌ ν•„μ”λ” μ—†λ‹¤.

## ν…μ¤νΈ μ΄λ¦„

`@DisplayName` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•μ—¬ ν…μ¤νΈ ν΄λμ¤μ™€ λ©”μ„λ“μ— μ΄λ¦„μ„ λ¶™μ—¬μ¤„ μ μλ‹¤.

```java
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

@DisplayName("A special test case")
class DisplayNameDemo {

    @Test
    @DisplayName("Custom test name containing spaces")
    void testWithDisplayNameContainingSpaces() {
    }

    @Test
    @DisplayName("β•―Β°β–΅Β°οΌ‰β•―")
    void testWithDisplayNameContainingSpecialCharacters() {
    }

    @Test
    @DisplayName("π±")
    void testWithDisplayNameContainingEmoji() {
    }

}
```

* κ·Έλ°λ° μ™ λ°¥μƒμ„ μ—λ” κ²ƒμΌκΉ?

## κ²€μ¦

κ²€μ¦`Assertion` λ©”μ„λ“λ” JUnit 4 μ—μ„ μΉμ™ν•κ² λ³΄μ•„μ™”λ κ²ƒλ“¤μ΄ κ±°μ κ·Έλ€λ΅ λ„μ–΄μ™”κ³ , λλ‹¤ μ§€μ›μ„ μ„ν• λ‡ κ°€μ§€ λ©”μ„λ“λ“¤μ΄ μ¶”κ°€λμ—λ‹¤. μμ„Έν• λ‚΄μ©μ€ [μ—¬κΈ°](http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html) μ—μ„ ν™•μΈ κ°€λ¥ν•λ‹¤.

JUnit 5λ” Java 8μ μ¶”κ°€ κΈ°λ¥μ„ λ°›μ•„λ“¤μ΄λ©°, μ‚¬μ©μκ°€ ν…μ¤νΈλ¥Ό μ‘μ„±ν•  λ• __λλ‹¤__ λ¥Ό μ κ·Ήμ μΌλ΅ μ‚¬μ©ν•λ„λ΅ μ λ„ν•μ€λ‹¤. κΈ°μ΅΄μ—λ” ν…μ¤νΈ λ©”μ„λ“λ¥Ό μƒμ„±ν•΄μ•Ό ν•  μ μλ μΌμ„, JUnit 5μ—μ„λ” λλ‹¤κ°€(κ·Έλ¦¬κ³  μ°λ¦¬λ”, λλ‹¤λ¥Ό __μµλ… ν•¨μ__ λΌκ³  μ½μ„ μλ„ μλ‹¤.) ν•  μλ„ μλ‹¤. μ•„λ μ½”λ“λ” μμ  μ½”λ“μ—μ„ κ·Έλ¬ν• λ¶€λ¶„λ§ μ¶”μ¶ν• κ²ƒμ΄λ‹¤.

```java
import static java.time.Duration.ofMillis;
import static java.time.Duration.ofMinutes;
import static org.junit.jupiter.api.Assertions.assertAll;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertTimeout;
import static org.junit.jupiter.api.Assertions.assertTimeoutPreemptively;
import static org.junit.jupiter.api.Assertions.assertTrue;

import org.junit.jupiter.api.Test;

class AssertionsDemo {
    // κΈ°λ³Έμ μΌλ΅λ” λλ‹¤λ¥Ό ν™μ©ν•μ—¬ μ—¬λ¬ κ°μ ν…μ¤νΈ μΌ€μ΄μ¤λ¥Ό κ²€μ¦ν•  μ μλ‹¤.
    @Test
    void groupedAssertions() {
        // In a grouped assertion all assertions are executed, and any
        // failures will be reported together.
        assertAll("person",
            () -> assertEquals("John", person.getFirstName()),
            () -> assertEquals("Doe", person.getLastName())
        );
    }

    // JUnit 4μ—μ„λ” ν…μ¤νΈ λ©”μ„λ“ μ™Έλ¶€(@Test μ–΄λ…Έν…μ΄μ…μ μΈμ)μ—μ„ μ •μν•΄μ•Ό ν–λ μ—¬λ¬ 'μµμ…'λ„, λλ‹¤λ¥Ό ν™μ©ν•μ—¬ ν•΄κ²°ν•κ³  μλ‹¤.
    @Test
    void exceptionTesting() {
        Throwable exception = assertThrows(IllegalArgumentException.class, () -> {
            throw new IllegalArgumentException("a message");
        });
        assertEquals("a message", exception.getMessage());
    }

    // λλ‹¤λ΅λ¶€ν„° κ²°κ³Όκ°’ λν• ν™•μΈν•  μ μλ‹¤.
    @Test
    void timeoutNotExceededWithResult() {
        // The following assertion succeeds, and returns the supplied object.
        String actualResult = assertTimeout(ofMinutes(2), () -> {
            return "a result";
        });
        assertEquals("a result", actualResult);
    }
}
```

## μ¶”μ •

κ²€μ¦ λ©”μ„λ“λ“¤κ³Ό κ°™μ΄, μ¶”μ •`Assumption` λ©”μ„λ“ λν• JUnit 4μ μΉμ™ν• λ¨μµμ„ κ±°μ κ°€μ Έμ™”μΌλ©°, λλ‹¤ μ§€μ›μ„ μ„ν• μ•½κ°„μ λ³€κ²½μ‚¬ν•­μ΄ μλ‹¤. μμ„Έν• μ‚¬ν•­μ€ [μ—¬κΈ°](http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assumptions.html) μ—μ„ ν™•μΈ κ°€λ¥ν•λ‹¤.

# @ParameterizedTest μ™€ μΈμλ¥Ό μ κ³µλ°›λ” ν…μ¤νΈ

`@Test` μ–΄λ…Έν…μ΄μ…κ³Ό λ‹¬λ¦¬, `@ParameterizedTest` μ–΄λ…Έν…μ΄μ…μ€ ν…μ¤νΈ λ©”μ„λ“κ°€ μΈμλ¥Ό λ°›μ„ μ μλ„λ΅ ν•λ‹¤.

```java
@Test
void test() {
    fail();
}

// μ„ ν…μ¤νΈ λ©”μ„λ“μ™€ λΉ„κµν•λΌ.
@ParameterizedTest
void testWithStringParameter(String argument) {
    assertNotNull(argument);
}
```

μΈμλ¥Ό μ κ³µλ°›λ” ν…μ¤νΈ λ©”μ„λ“λ” μΈμλ¥Ό νλ“ν•κΈ° μ„ν•΄ `@ValueSource` λ“±μ μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€λ΅ μ”κµ¬ν•λ‹¤. μ•„λλ” κ·Έ μμ‹μ΄λ‹¤.

```java
// @ValueSource μ–΄λ…Έν…μ΄μ…μ€ λ¬Έμμ—΄, μ •μ λ“±, μ›μ‹ μλ£ν•(primitive types)μ λ°°μ—΄μ„ λ©”μ„λ“μ— μ „λ‹¬ν•  μ μλ‹¤.
@ParameterizedTest
@ValueSource(strings = { "Hello", "World" })
void testWithStringParameter(String argument) {
    assertNotNull(argument);
}
```

JUnitμ΄ μ κ³µν•  μ μλ” μΈμμ μΆ…λ¥μ™€ μ κ³µ λ°©λ²•μ€ λ‹¤μ–‘ν•λ©°, μ‚¬μ© κ°€λ¥ν• μ–΄λ…Έν…μ΄μ…μ€ μ•„λμ™€ κ°™λ‹¤.

| μ–΄λ…Έν…μ΄μ… | μ„¤λ… |
| -------- | ------- |
| @ValueSource | ν…μ¤νΈ λ©”μ„λ“μ— μ›μ‹ μλ£ν• λ°°μ—΄μ„ μ κ³µν•λ‹¤. |
| @EnumSource | ν…μ¤νΈ λ©”μ„λ“μ— μ—΄κ±°ν• λ°°μ—΄μ„ μ κ³µν•λ‹¤. νΉμ • μ—΄κ±°ν• νƒ€μ…μΌλ΅λ¶€ν„° λ¨λ“  κ°μ²΄λ¥Ό κ°€μ Έμ¤κ±°λ‚, μΌλ¶€ κ°μ²΄λ§ κ°€μ Έμ¬ μλ„ μμΌλ©°, μµμ…μ— λ”°λΌ μΌλ¶€ μ μ™Έ λ° μ •κ·ν‘ν„μ‹μ„ μ΄μ©ν• μ„ νƒμ΄ κ°€λ¥ν•λ‹¤. |
| @MethodSource | ν…μ¤νΈ λ©”μ„λ“κ°€ μ”κµ¬ν•λ” μΈμ νƒ€μ…μ μ¤νΈλ¦Ό`Stream`(νΉμ€ `Iterable`, `Iterator`)μ„ λ°ν™ν•λ” λ©”μ„λ“λ¥Ό μ§€μ •ν•μ—¬ μΈμλ¥Ό μ κ³µν•λ‹¤. μ¤νΈλ¦Όμ„ μ κ³µν•λ” λ©”μ„λ“λ” _ν΄λμ¤ λ‹¨μ„_ μƒλ…μ£ΌκΈ°κ°€ μ•„λ‹ κ²½μ°, μ •μ  λ©”μ„λ“μ—¬μ•Ό ν•λ‹¤. |
| @CsvSource | μ΄ μ–΄λ…Έν…μ΄μ…μ€ μ‰Όν‘λ΅ λ¶„λ¦¬λ λ°μ΄ν„°(λ¬Έμμ—΄)λ¥Ό κ°€μ§€λ” λ°°μ—΄μ„ ν…μ¤νΈ λ©”μ„λ“μ— μ κ³µν•λ‹¤. ν…μ¤νΈ λ©”μ„λ“λ” ν• κ° μ΄μƒμ μΈμλ¥Ό μ κ³µλ°›μ„ μ μλ‹¤. |
| @CsvFileSource | μ΄ μ–΄λ…Έν…μ΄μ…μ€ CSV νμΌμ„ μ‚¬μ©ν•μ—¬ ν…μ¤νΈ λ©”μ„λ“μ— μΈμλ¥Ό μ κ³µν•λ‹¤. |
| @ArgumentsSource | μ΄ μ–΄λ…Έν…μ΄μ…μ€ `@MethodSource` μ–΄λ…Έν…μ΄μ…κ³Ό μ μ‚¬ν• λ™μ‘μ„ ν•λ‹¤. μ°¨μ΄μ μ€, μΈμ μ κ³µμ`Provider`κ°€ λ©”μ„λ“ λ€μ‹  μ¬μ‚¬μ© κ°€λ¥ν• μ •μ  ν΄λμ¤λΌλ” κ²ƒμ΄λ‹¤. |

# @RepeatedTest μ™€ λ°λ³µ ν…μ¤νΈ

`@RepeatedTest` μ–΄λ…Έν…μ΄μ…μ€ νΉμ • ν…μ¤νΈ μΌ€μ΄μ¤λ¥Ό λ°λ³µ μ‹¤ν–‰ν•  μ μλ„λ΅ ν•λ‹¤.

```java
// μ΄ ν…μ¤νΈ μΌ€μ΄μ¤λ” μ—΄ λ² μ‹¤ν–‰λλ‹¤.
@RepeatedTest(10)
void repeatedTest() {
    // ...
}
```